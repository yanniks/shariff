
/*
 * shariff - v1.4.5 - 01.12.2014
 * https://github.com/heiseonline/shariff
 * Copyright (c) 2014 Ines Pauer, Philipp Busse, Sebastian Hilbig, Erich Kramer, Deniz Sesli
 * Licensed under the MIT <http://www.opensource.org/licenses/mit-license.php> license
 */


(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";module.exports=function(e){var r=encodeURIComponent(e.getURL());return{popup:!0,shareText:{de:"teilen",en:"share"},name:"facebook",title:{de:"Bei Facebook teilen",en:"Share on Facebook"},shareUrl:"https://www.facebook.com/sharer/sharer.php?u="+r+e.getReferrerTrack()}};
},{}],2:[function(require,module,exports){
"use strict";module.exports=function(e){return{popup:!0,shareText:"+1",name:"googleplus",title:{de:"Bei Google+ teilen",en:"Share on Google+"},shareUrl:"https://plus.google.com/share?url="+e.getURL()+e.getReferrerTrack()}};
},{}],3:[function(require,module,exports){
"use strict";module.exports=function(e){return{popup:!1,shareText:"Info",name:"info",title:{de:"weitere Informationen",en:"more information"},shareUrl:e.getInfoUrl()}};
},{}],4:[function(require,module,exports){
"use strict";module.exports=function(e){return{popup:!1,shareText:"mail",name:"mail",title:{de:"Per E-Mail versenden",en:"Send by email"},shareUrl:e.getURL()+"?view=mail"}};
},{}],5:[function(require,module,exports){
(function (global){
"use strict";var $=(typeof window !== "undefined" ? window.$ : typeof global !== "undefined" ? global.$ : null);module.exports=function(e){return{popup:!0,shareText:"tweet",name:"twitter",title:{de:"Bei Twitter teilen",en:"Share on Twitter"},shareUrl:"https://twitter.com/intent/tweet?text="+e.getShareText()+"&url="+e.getURL()+e.getReferrerTrack()}};
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],6:[function(require,module,exports){
"use strict";module.exports=function(e){return{popup:!1,shareText:"WhatsApp",name:"whatsapp",title:{de:"Bei Whatsapp teilen",en:"Share on Whatsapp"},shareUrl:"whatsapp://send?text="+e.getShareText()+"%20"+e.getURL()+e.getReferrerTrack()}};
},{}],7:[function(require,module,exports){
(function (global){
"use strict";var $=(typeof window !== "undefined" ? window.$ : typeof global !== "undefined" ? global.$ : null),_Shariff=function(t,e){var n=this;this.element=t,this.options=$.extend({},this.defaults,e,$(t).data());var r=[require("./services/facebook"),require("./services/googleplus"),require("./services/twitter"),require("./services/whatsapp"),require("./services/mail"),require("./services/info")];this.services=$.map(this.options.services,function(t){var e;return r.forEach(function(r){return r=r(n),r.name===t?(e=r,null):void 0}),e}),this._addButtonList(),null!==this.options.backendUrl&&this.getShares().then($.proxy(this._updateCounts,this))};_Shariff.prototype={defaults:{theme:"color",backendUrl:null,infoUrl:"http://ct.de/-2467514",lang:"de",orientation:"horizontal",referrerTrack:null,services:["twitter","facebook","googleplus","info"],url:function(){var t=global.document.location.href,e=$("link[rel=canonical]").attr("href")||this.getMeta("og:url")||"";return e.length>0&&(e.indexOf("http")<0&&(e=global.document.location.protocol+"//"+global.document.location.host+e),t=e),t}},$socialshareElement:function(){return $(this.element)},getLocalized:function(t,e){return"object"==typeof t[e]?t[e][this.options.lang]:"string"==typeof t[e]?t[e]:void 0},getMeta:function(t){var e=$('meta[name="'+t+'"],[property="'+t+'"]').attr("content");return e||""},getInfoUrl:function(){return this.options.infoUrl},getURL:function(){var t=this.options.url;return"function"==typeof t?$.proxy(t,this)():t},getService:function(){var t=this.options.service;return"function"==typeof t?$.proxy(t,this)():t},getTTL:function(){var t=this.options.ttl;return"function"==typeof t?$.proxy(t,this)():t},getReferrerTrack:function(){return this.options.referrerTrack||""},getShares:function(){return $.getJSON(this.options.backendUrl+"?url="+encodeURIComponent(this.getURL())+"&ttl="+encodeURIComponent(this.getTTL())+"&service="+encodeURIComponent(this.getService()))},_updateCounts:function(t){var e=this;$.each(t,function(t,n){n>=1e3&&(n=Math.round(n/1e3)+"k"),$(e.element).find("."+t+" a").append('<span class="share_count">'+n)})},_addButtonList:function(){var t=this,e=this.$socialshareElement(),n="theme-"+this.options.theme,r="orientation-"+this.options.orientation,i=$("<ul>").addClass(n).addClass(r);this.services.forEach(function(e){var n=$('<li class="shariff-button">').addClass(e.name),r='<span class="share_text">'+t.getLocalized(e,"shareText"),o=$("<a>").attr("href",e.shareUrl).append(r);e.popup?o.attr("rel","popup"):o.attr("target","_blank"),o.attr("title",t.getLocalized(e,"title")),n.append(o),i.append(n)}),i.on("click",'[rel="popup"]',function(t){t.preventDefault();var e=$(this).attr("href"),n=$(this).attr("title"),r="600",i="460",o="width="+r+",height="+i;global.window.open(e,n,o)}),e.append(i)},abbreviateText:function(t,e){var n=decodeURIComponent(t);if(n.length<=e)return t;var r=n.substring(0,e-1).lastIndexOf(" ");return n=encodeURIComponent(n.substring(0,r))+"â€¦"},getShareText:function(){var t=this.getMeta("DC.title"),e=this.getMeta("DC.creator");return t.length>0&&e.length>0?t+=" - "+e:t=$("title").text(),encodeURIComponent(this.abbreviateText(t,120))}},module.exports=_Shariff,$(".shariff").each(function(){this.shariff=new _Shariff(this)});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./services/facebook":1,"./services/googleplus":2,"./services/info":3,"./services/mail":4,"./services/twitter":5,"./services/whatsapp":6}]},{},[7]);
